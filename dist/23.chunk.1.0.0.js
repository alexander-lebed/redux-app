(window["webpackJsonp"] = window["webpackJsonp"] || []).push([[23],{

/***/ "./src/components/Messages/Conversation.js":
/*!*************************************************!*\
  !*** ./src/components/Messages/Conversation.js ***!
  \*************************************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! react */ \"./node_modules/react/index.js\");\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var react_redux__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! react-redux */ \"./node_modules/react-redux/es/index.js\");\n/* harmony import */ var query_string__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! query-string */ \"./node_modules/query-string/index.js\");\n/* harmony import */ var query_string__WEBPACK_IMPORTED_MODULE_2___default = /*#__PURE__*/__webpack_require__.n(query_string__WEBPACK_IMPORTED_MODULE_2__);\n/* harmony import */ var react_bootstrap_Container__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! react-bootstrap/Container */ \"./node_modules/react-bootstrap/Container.js\");\n/* harmony import */ var react_bootstrap_Container__WEBPACK_IMPORTED_MODULE_3___default = /*#__PURE__*/__webpack_require__.n(react_bootstrap_Container__WEBPACK_IMPORTED_MODULE_3__);\n/* harmony import */ var react_bootstrap_Row__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! react-bootstrap/Row */ \"./node_modules/react-bootstrap/Row.js\");\n/* harmony import */ var react_bootstrap_Row__WEBPACK_IMPORTED_MODULE_4___default = /*#__PURE__*/__webpack_require__.n(react_bootstrap_Row__WEBPACK_IMPORTED_MODULE_4__);\n/* harmony import */ var react_bootstrap_Col__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! react-bootstrap/Col */ \"./node_modules/react-bootstrap/Col.js\");\n/* harmony import */ var react_bootstrap_Col__WEBPACK_IMPORTED_MODULE_5___default = /*#__PURE__*/__webpack_require__.n(react_bootstrap_Col__WEBPACK_IMPORTED_MODULE_5__);\n/* harmony import */ var react_bootstrap_Table__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! react-bootstrap/Table */ \"./node_modules/react-bootstrap/Table.js\");\n/* harmony import */ var react_bootstrap_Table__WEBPACK_IMPORTED_MODULE_6___default = /*#__PURE__*/__webpack_require__.n(react_bootstrap_Table__WEBPACK_IMPORTED_MODULE_6__);\n/* harmony import */ var react_bootstrap_InputGroup__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! react-bootstrap/InputGroup */ \"./node_modules/react-bootstrap/InputGroup.js\");\n/* harmony import */ var react_bootstrap_InputGroup__WEBPACK_IMPORTED_MODULE_7___default = /*#__PURE__*/__webpack_require__.n(react_bootstrap_InputGroup__WEBPACK_IMPORTED_MODULE_7__);\n/* harmony import */ var react_bootstrap_Form__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! react-bootstrap/Form */ \"./node_modules/react-bootstrap/Form.js\");\n/* harmony import */ var react_bootstrap_Form__WEBPACK_IMPORTED_MODULE_8___default = /*#__PURE__*/__webpack_require__.n(react_bootstrap_Form__WEBPACK_IMPORTED_MODULE_8__);\n/* harmony import */ var react_bootstrap_Modal__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(/*! react-bootstrap/Modal */ \"./node_modules/react-bootstrap/Modal.js\");\n/* harmony import */ var react_bootstrap_Modal__WEBPACK_IMPORTED_MODULE_9___default = /*#__PURE__*/__webpack_require__.n(react_bootstrap_Modal__WEBPACK_IMPORTED_MODULE_9__);\n/* harmony import */ var react_bootstrap_Button__WEBPACK_IMPORTED_MODULE_10__ = __webpack_require__(/*! react-bootstrap/Button */ \"./node_modules/react-bootstrap/Button.js\");\n/* harmony import */ var react_bootstrap_Button__WEBPACK_IMPORTED_MODULE_10___default = /*#__PURE__*/__webpack_require__.n(react_bootstrap_Button__WEBPACK_IMPORTED_MODULE_10__);\n/* harmony import */ var react_bootstrap_Jumbotron__WEBPACK_IMPORTED_MODULE_11__ = __webpack_require__(/*! react-bootstrap/Jumbotron */ \"./node_modules/react-bootstrap/Jumbotron.js\");\n/* harmony import */ var react_bootstrap_Jumbotron__WEBPACK_IMPORTED_MODULE_11___default = /*#__PURE__*/__webpack_require__.n(react_bootstrap_Jumbotron__WEBPACK_IMPORTED_MODULE_11__);\n/* harmony import */ var _redux_reducers_alerts__WEBPACK_IMPORTED_MODULE_12__ = __webpack_require__(/*! ../../redux/reducers/alerts */ \"./src/redux/reducers/alerts.js\");\n/* harmony import */ var _redux_reducers_conversations__WEBPACK_IMPORTED_MODULE_13__ = __webpack_require__(/*! ../../redux/reducers/conversations */ \"./src/redux/reducers/conversations.js\");\n/* harmony import */ var _utils__WEBPACK_IMPORTED_MODULE_14__ = __webpack_require__(/*! ../../utils */ \"./src/utils/index.js\");\n/* harmony import */ var _common_Spinner__WEBPACK_IMPORTED_MODULE_15__ = __webpack_require__(/*! ../common/Spinner */ \"./src/components/common/Spinner.js\");\n/* harmony import */ var _common_PeopleSelector__WEBPACK_IMPORTED_MODULE_16__ = __webpack_require__(/*! ../common/PeopleSelector */ \"./src/components/common/PeopleSelector.js\");\n/* harmony import */ var _Message__WEBPACK_IMPORTED_MODULE_17__ = __webpack_require__(/*! ./Message */ \"./src/components/Messages/Message.js\");\n/* harmony import */ var _MessageForm__WEBPACK_IMPORTED_MODULE_18__ = __webpack_require__(/*! ./MessageForm */ \"./src/components/Messages/MessageForm.js\");\nfunction _typeof(obj) { \"@babel/helpers - typeof\"; if (typeof Symbol === \"function\" && typeof Symbol.iterator === \"symbol\") { _typeof = function _typeof(obj) { return typeof obj; }; } else { _typeof = function _typeof(obj) { return obj && typeof Symbol === \"function\" && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : typeof obj; }; } return _typeof(obj); }\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nfunction _defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } }\n\nfunction _createClass(Constructor, protoProps, staticProps) { if (protoProps) _defineProperties(Constructor.prototype, protoProps); if (staticProps) _defineProperties(Constructor, staticProps); return Constructor; }\n\nfunction _possibleConstructorReturn(self, call) { if (call && (_typeof(call) === \"object\" || typeof call === \"function\")) { return call; } return _assertThisInitialized(self); }\n\nfunction _getPrototypeOf(o) { _getPrototypeOf = Object.setPrototypeOf ? Object.getPrototypeOf : function _getPrototypeOf(o) { return o.__proto__ || Object.getPrototypeOf(o); }; return _getPrototypeOf(o); }\n\nfunction _assertThisInitialized(self) { if (self === void 0) { throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\"); } return self; }\n\nfunction _inherits(subClass, superClass) { if (typeof superClass !== \"function\" && superClass !== null) { throw new TypeError(\"Super expression must either be null or a function\"); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, writable: true, configurable: true } }); if (superClass) _setPrototypeOf(subClass, superClass); }\n\nfunction _setPrototypeOf(o, p) { _setPrototypeOf = Object.setPrototypeOf || function _setPrototypeOf(o, p) { o.__proto__ = p; return o; }; return _setPrototypeOf(o, p); }\n\nfunction _defineProperty(obj, key, value) { if (key in obj) { Object.defineProperty(obj, key, { value: value, enumerable: true, configurable: true, writable: true }); } else { obj[key] = value; } return obj; }\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nvar Conversation =\n/*#__PURE__*/\nfunction (_React$Component) {\n  _inherits(Conversation, _React$Component);\n\n  function Conversation(params) {\n    var _this;\n\n    _classCallCheck(this, Conversation);\n\n    _this = _possibleConstructorReturn(this, _getPrototypeOf(Conversation).call(this, params));\n\n    _defineProperty(_assertThisInitialized(_this), \"state\", void 0);\n\n    _defineProperty(_assertThisInitialized(_this), \"interval\", void 0);\n\n    _defineProperty(_assertThisInitialized(_this), \"scrollableTable\", void 0);\n\n    _defineProperty(_assertThisInitialized(_this), \"scrollConversationToBottom\", function () {\n      if (_this.scrollableTable) {\n        var el = _this.scrollableTable;\n        var isScrolledToBottom = el.scrollHeight - el.clientHeight <= el.scrollTop + 1;\n\n        if (!isScrolledToBottom) {\n          el.scrollTop = el.scrollHeight - el.clientHeight;\n        }\n      }\n    });\n\n    _defineProperty(_assertThisInitialized(_this), \"getConversation\", function () {\n      var query = query_string__WEBPACK_IMPORTED_MODULE_2___default.a.parse(_this.props.location.search);\n      var convId = query.convId,\n          userIds = query.userIds;\n\n      if (convId) {\n        _this.props.getConversation(convId);\n      } else if (userIds) {\n        var members = [];\n\n        if (Array.isArray(userIds)) {\n          members = userIds.concat(_this.props.user._id);\n        } else {\n          var isConvWithOneself = _this.props.user._id === userIds;\n          members = isConvWithOneself ? [userIds] : [_this.props.user._id, userIds];\n        }\n\n        _this.props.getConversationWithUsers(members);\n      }\n    });\n\n    _defineProperty(_assertThisInitialized(_this), \"onSearch\", function (value) {\n      if (value === '') {\n        _this.setState({\n          filteredMessages: _this.props.conversation.messages // back to original list\n\n        });\n      } else {\n        var result = _this.props.conversation.messages.filter(function (message) {\n          return message.text.toLowerCase().indexOf(value.toLowerCase()) !== -1;\n        });\n\n        _this.setState({\n          filteredMessages: result\n        });\n      }\n    });\n\n    _defineProperty(_assertThisInitialized(_this), \"showMembersModal\", function (show) {\n      return _this.setState({\n        showModal: show\n      });\n    });\n\n    _defineProperty(_assertThisInitialized(_this), \"manageMembers\", function (people) {\n      var _this$props = _this.props,\n          conversation = _this$props.conversation,\n          saveConversation = _this$props.saveConversation,\n          alertSuccess = _this$props.alertSuccess,\n          translation = _this$props.translation;\n      var users = people.map(function (e) {\n        return {\n          _id: e._id,\n          username: e.username\n        };\n      });\n      conversation.users = users;\n      saveConversation(conversation);\n\n      _this.showMembersModal(false);\n\n      alertSuccess(translation.MESSAGES.MEMBERS_EDITED(users.map(function (e) {\n        return e.username;\n      })));\n    });\n\n    _defineProperty(_assertThisInitialized(_this), \"renderMessages\", function () {\n      var messages = _this.state.filteredMessages;\n      var notDeleted = messages.filter(function (e) {\n        return !e.deleted;\n      });\n      var synced = [];\n      var notSynced = [];\n      notDeleted.forEach(function (message) {\n        if (message.timestamp) {\n          synced.push(message);\n        } else {\n          notSynced.push(message);\n        }\n      });\n      var orderedSynced = Object(_utils__WEBPACK_IMPORTED_MODULE_14__[\"orderBy\"])(synced, 'timestamp');\n\n      var renderRows = function renderRows(messageArr) {\n        return messageArr.map(function (message, index) {\n          var rowClass = !message.read ? 'unread-message' : '';\n          return react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(\"tr\", {\n            key: message._id || index,\n            className: rowClass\n          }, react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(\"td\", {\n            style: {\n              padding: 8\n            }\n          }, react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(_Message__WEBPACK_IMPORTED_MODULE_17__[\"default\"], {\n            message: message\n          })));\n        });\n      };\n\n      return react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(\"div\", {\n        className: \"messages-table\",\n        ref: function ref(e) {\n          _this.scrollableTable = e;\n        }\n      }, react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(react_bootstrap_Table__WEBPACK_IMPORTED_MODULE_6___default.a, null, react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(\"tbody\", null, renderRows(orderedSynced), renderRows(notSynced))));\n    });\n\n    _this.state = {\n      showModal: false,\n      messages: [],\n      filteredMessages: []\n    };\n    _this.scrollableTable = {};\n    return _this;\n  }\n\n  _createClass(Conversation, [{\n    key: \"componentDidMount\",\n    value: function componentDidMount() {\n      var _this2 = this;\n\n      if (!this.props.isConversationsLoaded) {\n        this.props.getConversationsByUser(this.props.user._id);\n      }\n\n      this.getConversation();\n      setTimeout(function () {\n        return _this2.props.markAsRead();\n      }, 800);\n    }\n  }, {\n    key: \"componentDidUpdate\",\n    value: function componentDidUpdate(prevProps) {\n      var _this3 = this;\n\n      this.scrollConversationToBottom();\n      var prevMessages = prevProps.conversation.messages || [];\n      var currentMessages = this.props.conversation.messages || [];\n\n      if (prevMessages.length !== currentMessages.length) {\n        setTimeout(function () {\n          return _this3.props.markAsRead();\n        }, 500);\n      }\n    }\n  }, {\n    key: \"componentWillUnmount\",\n    value: function componentWillUnmount() {\n      clearInterval(this.interval);\n      this.props.conversationCleanup();\n    }\n  }, {\n    key: \"render\",\n    value: function render() {\n      var _this4 = this;\n\n      var _this$props2 = this.props,\n          user = _this$props2.user,\n          conversation = _this$props2.conversation,\n          conversations = _this$props2.conversations,\n          isConversationsLoaded = _this$props2.isConversationsLoaded,\n          isConversationLoaded = _this$props2.isConversationLoaded,\n          translation = _this$props2.translation;\n      var conversationsExist = conversations.some(function (e) {\n        return e._id === conversation._id;\n      });\n      var isLoading = !isConversationsLoaded || !isConversationLoaded;\n      var content = null;\n\n      if (isLoading) {\n        content = react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(\"div\", {\n          style: {\n            paddingTop: '50vh'\n          }\n        }, react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(_common_Spinner__WEBPACK_IMPORTED_MODULE_15__[\"default\"], null));\n      } else if (conversationsExist) {\n        var userIsMember = conversation.users.map(function (e) {\n          return e._id;\n        }).includes(user._id);\n\n        if (userIsMember) {\n          content = react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(\"div\", null, this.renderMessages(), react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(_MessageForm__WEBPACK_IMPORTED_MODULE_18__[\"default\"], null));\n        } else {\n          content = react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(react_bootstrap_Jumbotron__WEBPACK_IMPORTED_MODULE_11___default.a, {\n            className: \"text-center\"\n          }, react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(\"p\", null, translation.MESSAGES.YOU_NOT_MEMBER));\n        }\n      } else {\n        content = react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(react_bootstrap_Jumbotron__WEBPACK_IMPORTED_MODULE_11___default.a, {\n          className: \"text-center\"\n        }, react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(\"p\", null, translation.CONVERSATIONS.CONVERSATION_NOT_FOUND));\n      }\n\n      return react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(react_bootstrap_Container__WEBPACK_IMPORTED_MODULE_3___default.a, {\n        fluid: true\n      }, react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(react_bootstrap_Row__WEBPACK_IMPORTED_MODULE_4___default.a, null, react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(react_bootstrap_Col__WEBPACK_IMPORTED_MODULE_5___default.a, {\n        md: {\n          span: 10,\n          offset: 1\n        },\n        lg: {\n          span: 8,\n          offset: 2\n        }\n      }, react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(\"div\", {\n        className: \"header\"\n      }, react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(\"div\", {\n        style: {\n          color: 'grey'\n        }\n      }, react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(\"div\", {\n        style: {\n          color: 'grey'\n        }\n      }, react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(react_bootstrap_InputGroup__WEBPACK_IMPORTED_MODULE_7___default.a, {\n        size: \"sm\",\n        className: \"search-container\"\n      }, react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(react_bootstrap_InputGroup__WEBPACK_IMPORTED_MODULE_7___default.a.Prepend, null, react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(\"i\", {\n        className: \"fas fa-search\"\n      })), react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(react_bootstrap_Form__WEBPACK_IMPORTED_MODULE_8___default.a.Control, {\n        placeholder: translation.CONVERSATIONS.SEARCH_IN_MESSAGES,\n        \"aria-label\": \"Search messages\",\n        \"aria-describedby\": \"search\",\n        className: \"search-input\",\n        onChange: function onChange(e) {\n          return _this4.onSearch(e.target.value);\n        }\n      })))), react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(react_bootstrap_Button__WEBPACK_IMPORTED_MODULE_10___default.a, {\n        variant: \"outline-dark\",\n        className: \"d-none d-sm-block\",\n        size: \"sm\",\n        onClick: function onClick() {\n          return _this4.showMembersModal(true);\n        }\n      }, react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(\"i\", {\n        className: \"fa fa-users fa-lg\",\n        style: {\n          marginRight: 8\n        }\n      }), translation.MESSAGES.MANAGE_MEMBERS), react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(react_bootstrap_Button__WEBPACK_IMPORTED_MODULE_10___default.a, {\n        variant: \"outline-dark\",\n        className: \"d-block d-sm-none btn-mobile-icon\",\n        title: translation.MESSAGES.MANAGE_MEMBERS,\n        onClick: function onClick() {\n          return _this4.showMembersModal(true);\n        }\n      }, react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(\"i\", {\n        className: \"fa fa-users fa-lg\"\n      }))), content, conversation.users && react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(react_bootstrap_Modal__WEBPACK_IMPORTED_MODULE_9___default.a, {\n        size: \"lg\",\n        show: this.state.showModal,\n        onHide: function onHide() {\n          return _this4.showMembersModal(false);\n        }\n      }, react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(react_bootstrap_Modal__WEBPACK_IMPORTED_MODULE_9___default.a.Header, {\n        closeButton: true\n      }, react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(react_bootstrap_Modal__WEBPACK_IMPORTED_MODULE_9___default.a.Title, null, translation.MESSAGES.MANAGE_MEMBERS)), react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(react_bootstrap_Modal__WEBPACK_IMPORTED_MODULE_9___default.a.Body, null, react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(_common_PeopleSelector__WEBPACK_IMPORTED_MODULE_16__[\"default\"], {\n        selectedUserIds: conversation.users.map(function (e) {\n          return e._id;\n        }),\n        onSubmit: function onSubmit(people) {\n          return _this4.manageMembers(people);\n        },\n        onCancel: function onCancel() {\n          return _this4.showMembersModal(false);\n        }\n      })), react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(react_bootstrap_Modal__WEBPACK_IMPORTED_MODULE_9___default.a.Footer, {\n        className: \"manage-people-footer text-danger\"\n      }, react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(\"i\", {\n        className: \"fas fa-exclamation-triangle\",\n        style: {\n          marginRight: 8\n        }\n      }), \" \", translation.MESSAGES.NEW_MEMBERS_NOTE)))));\n    }\n  }], [{\n    key: \"getDerivedStateFromProps\",\n    value: function getDerivedStateFromProps(props, state) {\n      if (props.conversation.messages !== state.messages) {\n        return {\n          messages: props.conversation.messages,\n          filteredMessages: props.conversation.messages\n        };\n      }\n\n      return null;\n    }\n  }]);\n\n  return Conversation;\n}(react__WEBPACK_IMPORTED_MODULE_0___default.a.Component);\n\n/* harmony default export */ __webpack_exports__[\"default\"] = (Object(react_redux__WEBPACK_IMPORTED_MODULE_1__[\"connect\"])(function (state) {\n  return {\n    user: state.authentication.user,\n    users: state.users.users,\n    conversation: state.conversations.conversation,\n    conversations: state.conversations.conversations,\n    isConversationsLoaded: state.conversations.isConversationsLoaded,\n    isConversationLoaded: state.conversations.isConversationLoaded,\n    translation: state.translation\n  };\n}, {\n  getConversationsByUser: _redux_reducers_conversations__WEBPACK_IMPORTED_MODULE_13__[\"getConversationsByUser\"],\n  getConversation: _redux_reducers_conversations__WEBPACK_IMPORTED_MODULE_13__[\"getConversation\"],\n  getConversationWithUsers: _redux_reducers_conversations__WEBPACK_IMPORTED_MODULE_13__[\"getConversationWithUsers\"],\n  markAsRead: _redux_reducers_conversations__WEBPACK_IMPORTED_MODULE_13__[\"markAsRead\"],\n  deleteMessage: _redux_reducers_conversations__WEBPACK_IMPORTED_MODULE_13__[\"deleteMessage\"],\n  saveConversation: _redux_reducers_conversations__WEBPACK_IMPORTED_MODULE_13__[\"saveConversation\"],\n  conversationCleanup: _redux_reducers_conversations__WEBPACK_IMPORTED_MODULE_13__[\"conversationCleanup\"],\n  alertSuccess: _redux_reducers_alerts__WEBPACK_IMPORTED_MODULE_12__[\"alertSuccess\"]\n})(Conversation));\n\n//# sourceURL=webpack:///./src/components/Messages/Conversation.js?");

/***/ }),

/***/ "./src/components/Messages/Message.js":
/*!********************************************!*\
  !*** ./src/components/Messages/Message.js ***!
  \********************************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! react */ \"./node_modules/react/index.js\");\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var react_redux__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! react-redux */ \"./node_modules/react-redux/es/index.js\");\n/* harmony import */ var react_linkify__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! react-linkify */ \"./node_modules/react-linkify/dist/Linkify.js\");\n/* harmony import */ var react_linkify__WEBPACK_IMPORTED_MODULE_2___default = /*#__PURE__*/__webpack_require__.n(react_linkify__WEBPACK_IMPORTED_MODULE_2__);\n/* harmony import */ var react_bootstrap_Image__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! react-bootstrap/Image */ \"./node_modules/react-bootstrap/Image.js\");\n/* harmony import */ var react_bootstrap_Image__WEBPACK_IMPORTED_MODULE_3___default = /*#__PURE__*/__webpack_require__.n(react_bootstrap_Image__WEBPACK_IMPORTED_MODULE_3__);\n/* harmony import */ var _redux_reducers_conversations__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ../../redux/reducers/conversations */ \"./src/redux/reducers/conversations.js\");\n/* harmony import */ var _utils__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ../../utils */ \"./src/utils/index.js\");\n/* harmony import */ var _constants__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ../../constants */ \"./src/constants.js\");\nfunction _typeof(obj) { \"@babel/helpers - typeof\"; if (typeof Symbol === \"function\" && typeof Symbol.iterator === \"symbol\") { _typeof = function _typeof(obj) { return typeof obj; }; } else { _typeof = function _typeof(obj) { return obj && typeof Symbol === \"function\" && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : typeof obj; }; } return _typeof(obj); }\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nfunction _defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } }\n\nfunction _createClass(Constructor, protoProps, staticProps) { if (protoProps) _defineProperties(Constructor.prototype, protoProps); if (staticProps) _defineProperties(Constructor, staticProps); return Constructor; }\n\nfunction _possibleConstructorReturn(self, call) { if (call && (_typeof(call) === \"object\" || typeof call === \"function\")) { return call; } return _assertThisInitialized(self); }\n\nfunction _assertThisInitialized(self) { if (self === void 0) { throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\"); } return self; }\n\nfunction _getPrototypeOf(o) { _getPrototypeOf = Object.setPrototypeOf ? Object.getPrototypeOf : function _getPrototypeOf(o) { return o.__proto__ || Object.getPrototypeOf(o); }; return _getPrototypeOf(o); }\n\nfunction _inherits(subClass, superClass) { if (typeof superClass !== \"function\" && superClass !== null) { throw new TypeError(\"Super expression must either be null or a function\"); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, writable: true, configurable: true } }); if (superClass) _setPrototypeOf(subClass, superClass); }\n\nfunction _setPrototypeOf(o, p) { _setPrototypeOf = Object.setPrototypeOf || function _setPrototypeOf(o, p) { o.__proto__ = p; return o; }; return _setPrototypeOf(o, p); }\n\n\n\n\n\n\n\n\n\nvar Message =\n/*#__PURE__*/\nfunction (_React$PureComponent) {\n  _inherits(Message, _React$PureComponent);\n\n  function Message() {\n    _classCallCheck(this, Message);\n\n    return _possibleConstructorReturn(this, _getPrototypeOf(Message).apply(this, arguments));\n  }\n\n  _createClass(Message, [{\n    key: \"render\",\n    value: function render() {\n      var _this$props = this.props,\n          message = _this$props.message,\n          user = _this$props.user,\n          users = _this$props.users,\n          deleteMessage = _this$props.deleteMessage,\n          translation = _this$props.translation;\n      var isMessageFromCurrentUser = message.from._id === user._id;\n      var messageUser = users.find(function (e) {\n        return e._id === message.from._id;\n      });\n      return react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(\"div\", null, react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(\"div\", {\n        className: \"profile-picture-wrapper\"\n      }, react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(react_bootstrap_Image__WEBPACK_IMPORTED_MODULE_3___default.a, {\n        roundedCircle: true,\n        style: messageUser.online ? _constants__WEBPACK_IMPORTED_MODULE_6__[\"ONLINE_STYLE\"] : {},\n        className: \"profile-picture\",\n        src: messageUser.pictureUrl ? messageUser.pictureUrl : '/images/default-profile.jpg'\n      })), react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(\"div\", {\n        className: \"message-top\"\n      }, react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(\"div\", null, react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(\"span\", {\n        className: \"message-from\"\n      }, message.from.username), react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(\"span\", {\n        className: \"message-time\"\n      }, message.timestamp ? Object(_utils__WEBPACK_IMPORTED_MODULE_5__[\"timestampToHumanDate\"])(message.timestamp, true, translation) : translation.MESSAGES.SENDING), react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(react_linkify__WEBPACK_IMPORTED_MODULE_2___default.a, {\n        properties: {\n          target: '_blank'\n        }\n      }, react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(\"div\", {\n        className: \"message-text\"\n      }, message.text))), isMessageFromCurrentUser && react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(\"div\", null, react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(\"i\", {\n        id: \"delete\",\n        className: \"far fa-trash-alt pull-right cursor\",\n        title: translation.MESSAGES.DELETE,\n        style: {\n          color: 'grey'\n        },\n        onClick: function onClick() {\n          return deleteMessage(message._id);\n        }\n      }))));\n    }\n  }]);\n\n  return Message;\n}(react__WEBPACK_IMPORTED_MODULE_0___default.a.PureComponent);\n\n/* harmony default export */ __webpack_exports__[\"default\"] = (Object(react_redux__WEBPACK_IMPORTED_MODULE_1__[\"connect\"])(function (state) {\n  return {\n    user: state.authentication.user,\n    users: state.users.users,\n    translation: state.translation\n  };\n}, {\n  deleteMessage: _redux_reducers_conversations__WEBPACK_IMPORTED_MODULE_4__[\"deleteMessage\"]\n})(Message));\n\n//# sourceURL=webpack:///./src/components/Messages/Message.js?");

/***/ }),

/***/ "./src/components/Messages/MessageForm.js":
/*!************************************************!*\
  !*** ./src/components/Messages/MessageForm.js ***!
  \************************************************/
/*! exports provided: MessageForm, default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"MessageForm\", function() { return MessageForm; });\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! react */ \"./node_modules/react/index.js\");\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var react_redux__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! react-redux */ \"./node_modules/react-redux/es/index.js\");\n/* harmony import */ var emoji_mart__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! emoji-mart */ \"./node_modules/emoji-mart/dist-es/index.js\");\n/* harmony import */ var react_bootstrap_Row__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! react-bootstrap/Row */ \"./node_modules/react-bootstrap/Row.js\");\n/* harmony import */ var react_bootstrap_Row__WEBPACK_IMPORTED_MODULE_3___default = /*#__PURE__*/__webpack_require__.n(react_bootstrap_Row__WEBPACK_IMPORTED_MODULE_3__);\n/* harmony import */ var react_bootstrap_Col__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! react-bootstrap/Col */ \"./node_modules/react-bootstrap/Col.js\");\n/* harmony import */ var react_bootstrap_Col__WEBPACK_IMPORTED_MODULE_4___default = /*#__PURE__*/__webpack_require__.n(react_bootstrap_Col__WEBPACK_IMPORTED_MODULE_4__);\n/* harmony import */ var react_bootstrap_Form__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! react-bootstrap/Form */ \"./node_modules/react-bootstrap/Form.js\");\n/* harmony import */ var react_bootstrap_Form__WEBPACK_IMPORTED_MODULE_5___default = /*#__PURE__*/__webpack_require__.n(react_bootstrap_Form__WEBPACK_IMPORTED_MODULE_5__);\n/* harmony import */ var _redux_reducers_conversations__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ../../redux/reducers/conversations */ \"./src/redux/reducers/conversations.js\");\nfunction _typeof(obj) { \"@babel/helpers - typeof\"; if (typeof Symbol === \"function\" && typeof Symbol.iterator === \"symbol\") { _typeof = function _typeof(obj) { return typeof obj; }; } else { _typeof = function _typeof(obj) { return obj && typeof Symbol === \"function\" && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : typeof obj; }; } return _typeof(obj); }\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nfunction _defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } }\n\nfunction _createClass(Constructor, protoProps, staticProps) { if (protoProps) _defineProperties(Constructor.prototype, protoProps); if (staticProps) _defineProperties(Constructor, staticProps); return Constructor; }\n\nfunction _possibleConstructorReturn(self, call) { if (call && (_typeof(call) === \"object\" || typeof call === \"function\")) { return call; } return _assertThisInitialized(self); }\n\nfunction _getPrototypeOf(o) { _getPrototypeOf = Object.setPrototypeOf ? Object.getPrototypeOf : function _getPrototypeOf(o) { return o.__proto__ || Object.getPrototypeOf(o); }; return _getPrototypeOf(o); }\n\nfunction _assertThisInitialized(self) { if (self === void 0) { throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\"); } return self; }\n\nfunction _inherits(subClass, superClass) { if (typeof superClass !== \"function\" && superClass !== null) { throw new TypeError(\"Super expression must either be null or a function\"); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, writable: true, configurable: true } }); if (superClass) _setPrototypeOf(subClass, superClass); }\n\nfunction _setPrototypeOf(o, p) { _setPrototypeOf = Object.setPrototypeOf || function _setPrototypeOf(o, p) { o.__proto__ = p; return o; }; return _setPrototypeOf(o, p); }\n\nfunction _defineProperty(obj, key, value) { if (key in obj) { Object.defineProperty(obj, key, { value: value, enumerable: true, configurable: true, writable: true }); } else { obj[key] = value; } return obj; }\n\n\n\n\n\n\n\n\nvar MessageForm =\n/*#__PURE__*/\nfunction (_React$Component) {\n  _inherits(MessageForm, _React$Component);\n\n  function MessageForm(params) {\n    var _this;\n\n    _classCallCheck(this, MessageForm);\n\n    _this = _possibleConstructorReturn(this, _getPrototypeOf(MessageForm).call(this, params));\n\n    _defineProperty(_assertThisInitialized(_this), \"state\", void 0);\n\n    _defineProperty(_assertThisInitialized(_this), \"textAreaRef\", react__WEBPACK_IMPORTED_MODULE_0___default.a.createRef());\n\n    _defineProperty(_assertThisInitialized(_this), \"handleKeyPress\", function (evt) {\n      if (evt.key === 'Enter' && !evt.shiftKey) {\n        evt.preventDefault();\n\n        if (_this.state.messageText) {\n          var _this$props = _this.props,\n              user = _this$props.user,\n              conversation = _this$props.conversation;\n          var emptyTime = null; // mark as null to set time on backend\n\n          var message = {\n            from: {\n              _id: user._id,\n              username: user.username\n            },\n            text: _this.state.messageText,\n            timestamp: emptyTime,\n            read: false,\n            deleted: false\n          };\n          conversation.messages.push(message);\n          conversation.timestamp = emptyTime;\n\n          _this.props.saveConversation(conversation);\n\n          _this.setState({\n            messageText: ''\n          });\n        }\n      }\n    });\n\n    _defineProperty(_assertThisInitialized(_this), \"onEmojiClick\", function () {\n      return _this.setState({\n        showEmoji: !_this.state.showEmoji\n      });\n    });\n\n    _defineProperty(_assertThisInitialized(_this), \"setText\", function (text) {\n      var input = _this.textAreaRef.current;\n      var selectionStart = input.selectionStart,\n          selectionEnd = input.selectionEnd,\n          value = input.value;\n      var updatedText = \"\".concat(value.substring(0, selectionStart)).concat(text).concat(value.substring(selectionEnd));\n      input.focus();\n      input.selectionEnd = selectionEnd + 7;\n\n      _this.setState({\n        messageText: updatedText\n      });\n    });\n\n    _this.state = {\n      messageText: '',\n      showEmoji: false\n    };\n    return _this;\n  }\n\n  _createClass(MessageForm, [{\n    key: \"render\",\n    value: function render() {\n      var _this2 = this;\n\n      var translation = this.props.translation;\n      var _this$state = this.state,\n          messageText = _this$state.messageText,\n          showEmoji = _this$state.showEmoji;\n      var messageStyle = showEmoji ? {\n        paddingRight: 0\n      } : {};\n      var emojiStyle = showEmoji ? {\n        paddingLeft: 0\n      } : {};\n      return react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(react_bootstrap_Row__WEBPACK_IMPORTED_MODULE_3___default.a, {\n        noGutters: true\n      }, react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(react_bootstrap_Col__WEBPACK_IMPORTED_MODULE_4___default.a, {\n        xs: 12,\n        sm: showEmoji ? 7 : 12,\n        style: messageStyle\n      }, react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(react_bootstrap_Form__WEBPACK_IMPORTED_MODULE_5___default.a, null, react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(react_bootstrap_Form__WEBPACK_IMPORTED_MODULE_5___default.a.Group, {\n        controlId: \"message-form\",\n        className: \"message-form\",\n        style: {\n          display: 'flex',\n          marginBottom: 2\n        }\n      }, react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(\"div\", {\n        style: {\n          flex: 1\n        }\n      }, react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(react_bootstrap_Form__WEBPACK_IMPORTED_MODULE_5___default.a.Control, {\n        id: \"message-textarea\",\n        ref: this.textAreaRef,\n        as: \"textarea\",\n        autoFocus: true,\n        className: \"text-area\",\n        rows: 4,\n        placeholder: this.props.translation.MESSAGES.WRITE_MESSAGE,\n        value: messageText,\n        onKeyPress: this.handleKeyPress,\n        onChange: function onChange(e) {\n          return _this2.setState({\n            messageText: e.target.value\n          });\n        }\n      }), react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(react_bootstrap_Form__WEBPACK_IMPORTED_MODULE_5___default.a.Text, {\n        className: \"text-muted d-none d-sm-block\"\n      }, this.props.translation.MESSAGES.WRITE_MESSAGE_INFO)), react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(\"div\", {\n        className: \"emoji-select-area\"\n      }, react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(emoji_mart__WEBPACK_IMPORTED_MODULE_2__[\"Emoji\"], {\n        set: \"twitter\",\n        size: 32,\n        emoji: showEmoji ? 'grinning' : 'slightly_smiling_face',\n        onClick: function onClick() {\n          return _this2.onEmojiClick();\n        }\n      }))))), react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(react_bootstrap_Col__WEBPACK_IMPORTED_MODULE_4___default.a, {\n        xs: 12,\n        sm: showEmoji ? 5 : 12,\n        style: emojiStyle\n      }, showEmoji && react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(emoji_mart__WEBPACK_IMPORTED_MODULE_2__[\"Picker\"], {\n        title: translation.MESSAGES.PICK_EMOJI,\n        emoji: \"monkey\",\n        \"native\": true,\n        onClick: function onClick(emoji) {\n          return _this2.setText(emoji[\"native\"]);\n        }\n      })));\n    }\n  }]);\n\n  return MessageForm;\n}(react__WEBPACK_IMPORTED_MODULE_0___default.a.Component);\n/* harmony default export */ __webpack_exports__[\"default\"] = (Object(react_redux__WEBPACK_IMPORTED_MODULE_1__[\"connect\"])(function (state) {\n  return {\n    user: state.authentication.user,\n    conversation: state.conversations.conversation,\n    translation: state.translation\n  };\n}, {\n  saveConversation: _redux_reducers_conversations__WEBPACK_IMPORTED_MODULE_6__[\"saveConversation\"]\n})(MessageForm));\n\n//# sourceURL=webpack:///./src/components/Messages/MessageForm.js?");

/***/ }),

/***/ "./src/components/common/PeopleSelector.js":
/*!*************************************************!*\
  !*** ./src/components/common/PeopleSelector.js ***!
  \*************************************************/
/*! exports provided: PeopleSelector, default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"PeopleSelector\", function() { return PeopleSelector; });\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! react */ \"./node_modules/react/index.js\");\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var react_redux__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! react-redux */ \"./node_modules/react-redux/es/index.js\");\n/* harmony import */ var react_bootstrap_Row__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! react-bootstrap/Row */ \"./node_modules/react-bootstrap/Row.js\");\n/* harmony import */ var react_bootstrap_Row__WEBPACK_IMPORTED_MODULE_2___default = /*#__PURE__*/__webpack_require__.n(react_bootstrap_Row__WEBPACK_IMPORTED_MODULE_2__);\n/* harmony import */ var react_bootstrap_Col__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! react-bootstrap/Col */ \"./node_modules/react-bootstrap/Col.js\");\n/* harmony import */ var react_bootstrap_Col__WEBPACK_IMPORTED_MODULE_3___default = /*#__PURE__*/__webpack_require__.n(react_bootstrap_Col__WEBPACK_IMPORTED_MODULE_3__);\n/* harmony import */ var react_bootstrap_Table__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! react-bootstrap/Table */ \"./node_modules/react-bootstrap/Table.js\");\n/* harmony import */ var react_bootstrap_Table__WEBPACK_IMPORTED_MODULE_4___default = /*#__PURE__*/__webpack_require__.n(react_bootstrap_Table__WEBPACK_IMPORTED_MODULE_4__);\n/* harmony import */ var react_bootstrap_Form__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! react-bootstrap/Form */ \"./node_modules/react-bootstrap/Form.js\");\n/* harmony import */ var react_bootstrap_Form__WEBPACK_IMPORTED_MODULE_5___default = /*#__PURE__*/__webpack_require__.n(react_bootstrap_Form__WEBPACK_IMPORTED_MODULE_5__);\n/* harmony import */ var react_bootstrap_InputGroup__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! react-bootstrap/InputGroup */ \"./node_modules/react-bootstrap/InputGroup.js\");\n/* harmony import */ var react_bootstrap_InputGroup__WEBPACK_IMPORTED_MODULE_6___default = /*#__PURE__*/__webpack_require__.n(react_bootstrap_InputGroup__WEBPACK_IMPORTED_MODULE_6__);\n/* harmony import */ var react_bootstrap_Button__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! react-bootstrap/Button */ \"./node_modules/react-bootstrap/Button.js\");\n/* harmony import */ var react_bootstrap_Button__WEBPACK_IMPORTED_MODULE_7___default = /*#__PURE__*/__webpack_require__.n(react_bootstrap_Button__WEBPACK_IMPORTED_MODULE_7__);\n/* harmony import */ var react_bootstrap_Image__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! react-bootstrap/Image */ \"./node_modules/react-bootstrap/Image.js\");\n/* harmony import */ var react_bootstrap_Image__WEBPACK_IMPORTED_MODULE_8___default = /*#__PURE__*/__webpack_require__.n(react_bootstrap_Image__WEBPACK_IMPORTED_MODULE_8__);\n/* harmony import */ var _utils__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(/*! ../../utils */ \"./src/utils/index.js\");\n/* harmony import */ var _constants__WEBPACK_IMPORTED_MODULE_10__ = __webpack_require__(/*! ../../constants */ \"./src/constants.js\");\nfunction _typeof(obj) { \"@babel/helpers - typeof\"; if (typeof Symbol === \"function\" && typeof Symbol.iterator === \"symbol\") { _typeof = function _typeof(obj) { return typeof obj; }; } else { _typeof = function _typeof(obj) { return obj && typeof Symbol === \"function\" && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : typeof obj; }; } return _typeof(obj); }\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nfunction _defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } }\n\nfunction _createClass(Constructor, protoProps, staticProps) { if (protoProps) _defineProperties(Constructor.prototype, protoProps); if (staticProps) _defineProperties(Constructor, staticProps); return Constructor; }\n\nfunction _possibleConstructorReturn(self, call) { if (call && (_typeof(call) === \"object\" || typeof call === \"function\")) { return call; } return _assertThisInitialized(self); }\n\nfunction _getPrototypeOf(o) { _getPrototypeOf = Object.setPrototypeOf ? Object.getPrototypeOf : function _getPrototypeOf(o) { return o.__proto__ || Object.getPrototypeOf(o); }; return _getPrototypeOf(o); }\n\nfunction _assertThisInitialized(self) { if (self === void 0) { throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\"); } return self; }\n\nfunction _inherits(subClass, superClass) { if (typeof superClass !== \"function\" && superClass !== null) { throw new TypeError(\"Super expression must either be null or a function\"); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, writable: true, configurable: true } }); if (superClass) _setPrototypeOf(subClass, superClass); }\n\nfunction _setPrototypeOf(o, p) { _setPrototypeOf = Object.setPrototypeOf || function _setPrototypeOf(o, p) { o.__proto__ = p; return o; }; return _setPrototypeOf(o, p); }\n\nfunction _defineProperty(obj, key, value) { if (key in obj) { Object.defineProperty(obj, key, { value: value, enumerable: true, configurable: true, writable: true }); } else { obj[key] = value; } return obj; }\n\n\n\n\n\n\n\n\n\n\n\n\nvar PeopleSelector =\n/*#__PURE__*/\nfunction (_React$PureComponent) {\n  _inherits(PeopleSelector, _React$PureComponent);\n\n  function PeopleSelector(props) {\n    var _this;\n\n    _classCallCheck(this, PeopleSelector);\n\n    _this = _possibleConstructorReturn(this, _getPrototypeOf(PeopleSelector).call(this, props));\n\n    _defineProperty(_assertThisInitialized(_this), \"state\", void 0);\n\n    _defineProperty(_assertThisInitialized(_this), \"toggleUser\", function (user) {\n      var people = _this.state.people;\n\n      if (people.map(function (e) {\n        return e._id;\n      }).includes(user._id)) {\n        _this.setState({\n          people: people.filter(function (e) {\n            return e._id !== user._id;\n          })\n        });\n      } else {\n        _this.setState({\n          people: people.concat(user)\n        });\n      }\n    });\n\n    var selectedUserIds = props.selectedUserIds,\n        users = props.users;\n    var selectedUsers = [];\n\n    if (selectedUserIds.length > 0) {\n      selectedUsers = users.filter(function (e) {\n        return selectedUserIds.includes(e._id);\n      });\n    }\n\n    _this.state = {\n      searchText: '',\n      people: selectedUsers\n    };\n    return _this;\n  }\n\n  _createClass(PeopleSelector, [{\n    key: \"render\",\n    value: function render() {\n      var _this2 = this;\n\n      var _this$state = this.state,\n          people = _this$state.people,\n          searchText = _this$state.searchText;\n      var _this$props = this.props,\n          users = _this$props.users,\n          excludedUserIds = _this$props.excludedUserIds,\n          submitButtonText = _this$props.submitButtonText,\n          onSubmit = _this$props.onSubmit,\n          onCancel = _this$props.onCancel,\n          translation = _this$props.translation;\n      users = users.filter(function (e) {\n        return !excludedUserIds.includes(e._id);\n      });\n\n      if (searchText) {\n        users = users.filter(function (e) {\n          return e.username.toLowerCase().indexOf(searchText.toLowerCase()) !== -1;\n        });\n      }\n\n      users = Object(_utils__WEBPACK_IMPORTED_MODULE_9__[\"orderBy\"])(users, ['username']);\n      return react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(\"div\", null, react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(\"div\", {\n        className: \"people-select-header\"\n      }, react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(react_bootstrap_InputGroup__WEBPACK_IMPORTED_MODULE_6___default.a, {\n        size: \"sm\",\n        className: \"search\"\n      }, react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(react_bootstrap_InputGroup__WEBPACK_IMPORTED_MODULE_6___default.a.Prepend, null, react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(\"i\", {\n        className: \"fas fa-search\"\n      })), react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(react_bootstrap_Form__WEBPACK_IMPORTED_MODULE_5___default.a.Control, {\n        placeholder: translation.PEOPLE.SEARCH_PEOPLE,\n        \"aria-label\": \"Search people\",\n        \"aria-describedby\": \"search\",\n        className: \"search-input\",\n        value: searchText,\n        onChange: function onChange(e) {\n          return _this2.setState({\n            searchText: e.target.value\n          });\n        }\n      })), react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(\"div\", {\n        className: \"actions\"\n      }, react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(react_bootstrap_Button__WEBPACK_IMPORTED_MODULE_7___default.a, {\n        size: \"sm\",\n        variant: \"outline-secondary\",\n        onClick: onCancel\n      }, translation.COMMON.CANCEL), ' ', react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(react_bootstrap_Button__WEBPACK_IMPORTED_MODULE_7___default.a, {\n        size: \"sm\",\n        variant: \"success\",\n        disabled: people.length === 0,\n        onClick: function onClick() {\n          return onSubmit(people);\n        }\n      }, submitButtonText || translation.COMMON.SUBMIT))), users.length === 0 ? react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(\"div\", {\n        className: \"text-center\"\n      }, translation.COMMON.NO_RESULTS) : react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(react_bootstrap_Table__WEBPACK_IMPORTED_MODULE_4___default.a, {\n        hover: true\n      }, react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(\"tbody\", null, users.map(function (user) {\n        var selected = people.map(function (e) {\n          return e._id;\n        }).includes(user._id);\n        return react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(\"tr\", {\n          key: user._id,\n          id: user._id\n        }, react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(\"td\", {\n          className: selected ? 'active' : '',\n          style: {\n            padding: 5\n          },\n          onClick: function onClick() {\n            return _this2.toggleUser(user);\n          }\n        }, react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(react_bootstrap_Row__WEBPACK_IMPORTED_MODULE_2___default.a, {\n          noGutters: true\n        }, react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(react_bootstrap_Col__WEBPACK_IMPORTED_MODULE_3___default.a, {\n          xs: 10\n        }, react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(\"div\", {\n          className: \"profile-picture-wrapper\"\n        }, react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(react_bootstrap_Image__WEBPACK_IMPORTED_MODULE_8___default.a, {\n          roundedCircle: true,\n          style: user.online ? _constants__WEBPACK_IMPORTED_MODULE_10__[\"ONLINE_STYLE\"] : {},\n          className: \"profile-picture\",\n          src: user.pictureUrl ? user.pictureUrl : '/images/default-profile.jpg'\n        })), react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(\"div\", {\n          style: {\n            fontSize: 13\n          }\n        }, react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(\"span\", {\n          style: {\n            fontWeight: 700\n          }\n        }, user.username), react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(\"div\", {\n          style: {\n            color: 'grey'\n          }\n        }, !user.online && \"\".concat(translation.PEOPLE.LAST_SEEN, \" \").concat(Object(_utils__WEBPACK_IMPORTED_MODULE_9__[\"timestampToHumanDate\"])(user.lastTime, false, translation))))), react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(react_bootstrap_Col__WEBPACK_IMPORTED_MODULE_3___default.a, {\n          xs: 2\n        }, react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(\"div\", {\n          className: \"material-switch pull-right\",\n          style: {\n            marginTop: 12\n          }\n        }, react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(\"input\", {\n          type: \"checkbox\",\n          checked: selected,\n          onChange: function onChange() {}\n        }), react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(\"label\", {\n          className: \"label-success\"\n        }))))));\n      }))));\n    }\n  }]);\n\n  return PeopleSelector;\n}(react__WEBPACK_IMPORTED_MODULE_0___default.a.PureComponent);\n\n_defineProperty(PeopleSelector, \"defaultProps\", {\n  excludedUserIds: [],\n  selectedUserIds: [],\n  submitButtonText: ''\n});\n\n/* harmony default export */ __webpack_exports__[\"default\"] = (Object(react_redux__WEBPACK_IMPORTED_MODULE_1__[\"connect\"])(function (state) {\n  return {\n    users: state.users.users,\n    translation: state.translation\n  };\n})(PeopleSelector));\n\n//# sourceURL=webpack:///./src/components/common/PeopleSelector.js?");

/***/ })

}]);