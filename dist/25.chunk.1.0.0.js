(window.webpackJsonp=window.webpackJsonp||[]).push([[25,34],{148:function(e,t,n){"use strict";n.r(t);var a=n(0),r=n.n(a),s=n(29),o=n(327),i=n.n(o),c=n(86),l=n.n(c);t.default=function(e){var t=Object(s.c)(function(e){return e.translation});return r.a.createElement(i.a,{show:!0,onHide:e.onCancel},r.a.createElement(i.a.Header,null,r.a.createElement(i.a.Title,null,e.title)),r.a.createElement(i.a.Body,null,e.body),r.a.createElement(i.a.Footer,null,r.a.createElement(l.a,{variant:"success",size:"sm",onClick:e.onConfirm},t.COMMON.YES),r.a.createElement(l.a,{variant:"outline-dark",size:"sm",onClick:e.onCancel},t.COMMON.CANCEL)))}},163:function(e,t,n){"use strict";n.r(t);var a=n(43),r=n.n(a),s=n(44),o=n.n(s),i=n(45),c=n.n(i),l=n(46),u=n.n(l),m=n(47),d=n.n(m),f=n(20),v=n.n(f),E=n(0),C=n.n(E),h=n(29),p=n(321),N=n.n(p),g=n(299),y=n.n(g),O=n(298),S=n.n(O),k=n(59),I=n.n(k),w=n(108),_=n.n(w),P=n(10),b=n(14),x=function(e){function t(){return r()(this,t),c()(this,u()(t).apply(this,arguments))}return d()(t,e),o()(t,[{key:"render",value:function(){var e=this.props,t=e.conversation,n=e.userId,a=e.users,r=e.translation,s=e.history,o=e.showPictureModal,i=e.showDeleteConfirmation,c=t.messages.filter(function(e){return!e.deleted}),l=c.filter(function(e){return!e.read&&e.from._id!==n}),u=c.length>0?c[c.length-1]:null,m=u&&!u.read?"unread-message":"",d=function(){s.push("/conversation?".concat(N.a.stringify({convId:t._id})))};return C.a.createElement("tr",{key:t._id,className:l.length>0?"new-messages-bg":""},C.a.createElement("td",{className:"conversation-td"},C.a.createElement(y.a,{noGutters:!0},C.a.createElement(S.a,{xs:7,sm:10},C.a.createElement(T,{history:s,convId:t._id,userId:n,conversation:t,showPictureModal:o,users:a}),u&&C.a.createElement(y.a,{className:"message-preview d-none d-sm-flex",onClick:d},C.a.createElement(S.a,{xs:4,sm:2,className:"user-from-text",style:{paddingRight:0}},u.from.username,":"),C.a.createElement(S.a,{xs:8,sm:8,style:{paddingLeft:10}},C.a.createElement("div",{className:"conversation-text ".concat(m)},u.text)))),C.a.createElement(S.a,{xs:5,sm:2,className:"conversation-actions",onClick:d},l.length>0&&C.a.createElement(_.a,{variant:"success",style:{marginRight:15}},l.length),Object(b.timestampToHumanDate)(t.timestamp,!1,r),C.a.createElement("i",{className:"far fa-trash-alt",title:r.CONVERSATIONS.DELETE,style:{paddingLeft:10},onClick:function(e){return i(e,t._id)}}))),u&&C.a.createElement(y.a,{className:"message-preview d-flex d-sm-none",onClick:d},C.a.createElement(S.a,{xs:4,sm:2,className:"user-from-text"},u.from.username,":"),C.a.createElement(S.a,{xs:8,sm:8,style:{paddingLeft:10}},C.a.createElement("div",{className:"conversation-text ".concat(m)},u.text)))))}}]),t}(C.a.PureComponent);v()(x,"displayName","ConversationPreview"),t.default=Object(h.b)(function(e){return{user:e.authentication.user,users:e.users.users,translation:e.translation}},{})(x);var T=function(e){function t(){return r()(this,t),c()(this,u()(t).apply(this,arguments))}return d()(t,e),o()(t,[{key:"render",value:function(){var e=this.props,t=e.history,n=e.convId,a=e.conversation,r=e.userId,s=e.users,o=e.showPictureModal,i=a.users.map(function(e){return e._id}),c=s.filter(function(e){return i.includes(e._id)});c.length>1&&(c=c.filter(function(e){return e._id!==r}));var l,u=c[0];l=1===c.length?u.pictureUrl?u.pictureUrl:"/images/default-profile.jpg":"/images/conversation-group.jpg";return C.a.createElement(C.a.Fragment,null,C.a.createElement("div",{className:"profile-picture-wrapper"},1===c.length?C.a.createElement(I.a,{roundedCircle:!0,style:u.online?P.ONLINE_STYLE:{},className:"profile-picture",src:l,onClick:function(){return o(l)}}):C.a.createElement(I.a,{roundedCircle:!0,style:c.some(function(e){return e.online})?P.ONLINE_STYLE:{},className:"profile-picture",src:l,onClick:function(){return o(l)}})),C.a.createElement("div",{style:{color:"#343a40"},onClick:function(){t.push("/conversation?".concat(N.a.stringify({convId:n})))}},1===c.length?C.a.createElement("strong",null,u.username):C.a.createElement("div",{className:"cut-senders-text"},c.map(function(e){return C.a.createElement("strong",{key:e._id,style:e.online?{color:P.MAIN_COLOR}:{}},e.username)}).reduce(function(e,t){return[e,", ",t]}))))}}]),t}(C.a.PureComponent);v()(T,"displayName","SenderInfo")},184:function(e,t,n){"use strict";n.r(t);var a=n(43),r=n.n(a),s=n(44),o=n.n(s),i=n(45),c=n.n(i),l=n(46),u=n.n(l),m=n(39),d=n.n(m),f=n(47),v=n.n(f),E=n(20),C=n.n(E),h=n(0),p=n.n(h),N=n(29),g=n(302),y=n.n(g),O=n(299),S=n.n(O),k=n(298),I=n.n(k),w=n(316),_=n.n(w),P=n(301),b=n.n(P),x=n(327),T=n.n(x),L=n(322),M=n.n(L),R=n(317),A=n.n(R),D=n(86),V=n.n(D),j=n(59),B=n.n(j),F=n(49),H=n(148),U=n(163),z=n(61),Y=function(e){function t(e){var n;return r()(this,t),n=c()(this,u()(t).call(this,e)),C()(d()(n),"state",void 0),C()(d()(n),"onSearch",function(e){if(""===e)n.setState({filteredConversations:n.props.conversations});else{var t=n.props.conversations.filter(function(t){return t.users.filter(function(t){return-1!==t.username.toLowerCase().indexOf(e.toLowerCase())}).length>0||-1!=="".concat(t.messages.map(function(e){return e.text}).join(" ")).toLowerCase().indexOf(e.toLowerCase())});n.setState({filteredConversations:t})}}),C()(d()(n),"createConversation",function(){return n.props.history.push("/create-conversation")}),C()(d()(n),"showPictureModal",function(e){return n.setState({clickedPicture:e})}),C()(d()(n),"hidePictureModal",function(){return n.setState({clickedPicture:""})}),C()(d()(n),"showDeleteConfirmation",function(e,t){e.stopPropagation(),n.setState({deleteConversationId:t})}),C()(d()(n),"hideDeleteConfirmation",function(){return n.setState({deleteConversationId:""})}),C()(d()(n),"deleteConversation",function(){n.props.deleteConversation(n.state.deleteConversationId),n.hideDeleteConfirmation()}),n.state={conversations:[],filteredConversations:[],clickedPicture:"",deleteConversationId:""},n}return v()(t,e),o()(t,[{key:"componentDidMount",value:function(){this.props.getConversationsByUser(this.props.user._id)}},{key:"render",value:function(){var e=this,t=this.props,n=t.user,a=t.isConversationsLoaded,r=t.translation,s=t.history,o=this.state.filteredConversations,i=[];return i=a?0===o.length?p.a.createElement(M.a,{className:"text-center"},p.a.createElement("p",null,r.CONVERSATIONS.NO_CONVERSATIONS)):p.a.createElement(A.a,{hover:!0},p.a.createElement("tbody",null,o.map(function(t){return p.a.createElement(U.default,{key:t._id,userId:n._id,conversation:t,history:s,showPictureModal:e.showPictureModal,showDeleteConfirmation:e.showDeleteConfirmation})}))):p.a.createElement("div",{style:{paddingTop:"50vh"}},p.a.createElement(z.default,null)),p.a.createElement(y.a,{fluid:!0},p.a.createElement(S.a,null,p.a.createElement(I.a,{md:{span:10,offset:1},lg:{span:8,offset:2}},p.a.createElement("div",{className:"header"},p.a.createElement("div",{style:{color:"grey"}},p.a.createElement(_.a,{size:"sm",className:"search-container"},p.a.createElement(_.a.Prepend,null,p.a.createElement("i",{className:"fas fa-search"})),p.a.createElement(b.a.Control,{placeholder:r.CONVERSATIONS.SEARCH_IN_CONVERSATIONS,"aria-label":"Search conversations","aria-describedby":"search",className:"search-input",onChange:function(t){return e.onSearch(t.target.value)}}))),p.a.createElement(V.a,{variant:"outline-dark",size:"sm",className:"create-btn d-none d-sm-block",onClick:function(){return e.createConversation()}},p.a.createElement("i",{className:"fa fa-comments fa-lg",style:{marginRight:8}}),r.CONVERSATIONS.NEW_CONVERSATION),p.a.createElement(V.a,{variant:"outline-dark",className:"d-block d-sm-none btn-mobile-icon",title:r.CONVERSATIONS.NEW_CONVERSATION,onClick:function(){return e.createConversation()}},p.a.createElement("i",{className:"fa fa-comments fa-lg"}))),i,this.state.clickedPicture&&p.a.createElement(T.a,{show:null!==this.state.clickedPicture,className:"profile-modal",onHide:this.hidePictureModal},p.a.createElement(T.a.Body,{style:{textAlign:"center"}},p.a.createElement(B.a,{className:"profile-modal-picture",src:this.state.clickedPicture}))),this.state.deleteConversationId&&p.a.createElement(H.default,{title:r.COMMON.DELETE_CONFIRMATION,body:r.CONVERSATIONS.DELETE_CONFIRMATION,onConfirm:function(){return e.deleteConversation()},onCancel:function(){return e.hideDeleteConfirmation()}}))))}}],[{key:"getDerivedStateFromProps",value:function(e,t){return e.conversations!==t.conversations?{conversations:e.conversations,filteredConversations:e.conversations}:null}}]),t}(p.a.PureComponent);t.default=Object(N.b)(function(e){return{user:e.authentication.user,conversations:e.conversations.conversations,isConversationsLoaded:e.conversations.isConversationsLoaded,translation:e.translation}},{getConversationsByUser:F.getConversationsByUser,deleteConversation:F.deleteConversation})(Y)}}]);